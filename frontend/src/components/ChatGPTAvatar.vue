<template>
  <n-avatar :color="color" :size="size">
    <n-icon v-if="iconStyle == 'default'" size="48">
      <svg
        width="512px"
        height="512px"
        viewBox="0 0 512 512"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <rect id="矩形" x="0" y="0" width="512" height="512" />
          <g id="编组" transform="translate(72.000000, 70.000000)" fill="#FFFFFF" fill-rule="nonzero">
            <path id="形状" d="M343.740713,152.246813 C346.890302,142.806247 348.496773,132.921796 348.498559,122.972276 C348.497403,106.50868 344.100628,90.342365 335.760188,76.1350952 C319.000955,47.0384834 287.912193,29.0745335 254.266122,29.0745335 C247.637532,29.0746139 241.027482,29.7728701 234.54593,31.1576867 C216.911999,11.3414364 191.61787,0 165.053251,0 L164.463403,0 L164.242047,0 C123.490457,0 87.3508783,26.2290293 74.823446,64.8946393 C48.5890186,70.2539525 25.9475411,86.6402724 12.7019128,109.853866 C4.38689194,124.146644 0.00508817717,140.376738 0,156.90144 C0,180.124954 8.64618203,202.521136 24.2553799,219.753187 C21.1045333,229.193481 19.4976007,239.078066 19.4962317,249.027724 C19.4977012,265.491278 23.8944539,281.657513 32.234603,295.864905 C52.584236,331.204159 93.492321,349.38323 133.443652,340.841015 C151.079869,360.657313 176.375367,372 202.94154,372 L203.531388,372 L203.770973,372 C244.544699,372 280.672558,345.769672 293.199991,307.068996 C319.434296,301.70782 342.075635,285.321471 355.322826,262.108471 C363.628834,247.828276 368,231.611764 368,215.102456 C368,191.879321 359.353839,169.483529 343.744619,152.252008 L343.740713,152.246813 L343.740713,152.246813 Z M203.132496,348.167131 L203.036596,348.167131 C186.798415,348.161728 171.07575,342.452995 158.602817,332.033696 C159.34349,331.634062 160.075435,331.218388 160.798134,330.786969 L234.707992,288.004731 C238.462641,285.862838 240.781911,281.866932 240.783343,277.537414 L240.783343,173.047354 L272.023192,191.123606 C272.356228,191.289962 272.584294,191.612074 272.630986,191.98203 L272.630986,278.455577 C272.58822,316.90154 241.499996,348.08921 203.132496,348.167131 L203.132496,348.167131 Z M52.9083316,284.13693 C46.7740185,273.500132 43.5421402,261.430449 43.5380282,249.142856 C43.5380282,245.135213 43.8870056,241.117123 44.5667302,237.168244 C45.1188437,237.499929 46.082438,238.090171 46.773882,238.488454 L121.038355,281.506955 C124.807963,283.713915 129.470874,283.712917 133.239542,281.504343 L223.909859,229.002786 L223.909859,265.356246 L223.909859,265.418926 C223.909859,265.773822 223.743545,266.108082 223.460616,266.321266 L148.386203,309.790284 C137.763561,315.921309 125.722661,319.149784 113.466327,319.153203 C88.4959722,319.14966 65.4190617,305.804473 52.9083316,284.133012 L52.9083316,284.13693 L52.9083316,284.13693 Z M34.1750254,121.711608 C42.3077709,107.5996 55.1492324,96.7942786 70.4520908,91.1866295 C70.4520908,91.8234853 70.4157371,92.9519264 70.4157371,93.7353498 L70.4157371,179.194654 L70.4144388,179.264695 C70.4151098,183.584277 72.7351085,187.571552 76.491993,189.709908 L166.895775,241.850369 L135.599162,259.904129 C135.285581,260.110637 134.889356,260.146666 134.543607,260.000111 L59.6810184,216.787305 C38.1429485,204.322651 24.8816869,181.340462 24.8788732,156.474077 C24.88358,144.274854 28.0902325,132.29011 34.1789205,121.715499 L34.1750254,121.711608 L34.1750254,121.711608 Z M291.483219,182.286407 L201.104225,130.142316 L232.393555,112.09603 C232.706971,111.889306 233.103203,111.853268 233.44882,112.000053 L308.289584,155.174178 C329.840166,167.619159 343.115717,190.600988 343.121127,215.47243 C343.121127,244.640385 324.906443,270.739667 297.518869,280.81337 L297.518869,192.80368 C297.522763,192.771255 297.522763,192.737534 297.522763,192.705109 C297.521589,188.402203 295.218008,184.428339 291.483219,182.286407 L291.483219,182.286407 Z M322.417354,134.925739 C321.68728,134.482263 320.951848,134.047518 320.211217,133.621597 L245.937093,91.0833312 C244.085203,90.0134284 241.980357,89.449373 239.837008,89.4486346 C237.69366,89.449373 235.588814,90.0134284 233.736924,91.0833312 L143.053521,142.997214 L143.053521,107.050676 L143.053521,106.988697 C143.053521,106.637482 143.221521,106.306927 143.504125,106.096457 L218.588295,63.1501627 C229.208822,57.0794726 241.252334,53.8830084 253.511407,53.8830084 C292.117491,53.8830084 323.425352,84.9241663 323.425352,123.201375 C323.423483,127.129405 323.08628,131.05023 322.417354,134.921865 L322.417354,134.925739 L322.417354,134.925739 Z M126.170596,198.952646 L94.9398849,180.872372 C94.6070153,180.705978 94.3790633,180.383795 94.3323944,180.013757 L94.3323944,93.5196681 C94.3492331,55.0339747 125.487979,23.8328691 163.868684,23.8328691 C180.124078,23.8362496 195.865283,29.5469 208.360563,39.9737907 C207.798408,40.2816451 206.817874,40.8246119 206.166344,41.2207958 L132.293427,84.0125535 C128.541177,86.1533694 126.223347,90.1490457 126.222407,94.4783032 L126.222407,94.5471483 L126.170596,198.952646 L126.170596,198.952646 Z M143.053521,162.178526 L183.48169,138.852368 L223.909859,162.162899 L223.909859,208.799587 L183.48169,232.111421 L143.053521,208.799587 L143.053521,162.178526 Z" />
          </g>
        </g>
      </svg><svg
        width="512px"
        height="512px"
        viewBox="0 0 512 512"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <rect id="矩形" x="0" y="0" width="512" height="512" />
          <g id="编组" transform="translate(93.000000, 91.000000)" fill="#FFFFFF" fill-rule="nonzero">
            <path id="形状" d="M304.509436,135.057657 C307.299561,126.682961 308.722685,117.914497 308.724267,109.08831 C308.723243,94.4835065 304.828274,80.1424205 297.439731,67.5391974 C282.593237,41.7276869 255.052649,25.7919249 225.246619,25.7919249 C219.374553,25.7919962 213.518911,26.411417 207.777101,27.6398834 C192.155738,10.0609516 169.748439,0 146.215652,0 L145.693123,0 L145.497031,0 C109.396437,0 77.3814846,23.2676873 66.2838136,57.5678252 C43.0435328,62.3220547 22.986137,76.8583061 11.2522379,97.4510098 C3.88621406,110.130087 0.0045074613,124.527751 0,139.186761 C0,159.788265 7.65938951,179.655847 21.4871029,194.942343 C18.6958637,203.316797 17.2723311,212.085381 17.2711183,220.91169 C17.2724201,235.516457 21.1673695,249.857471 28.5556538,262.460803 C46.5827743,293.810141 82.8220017,309.936737 118.21367,302.358965 C133.837058,319.937939 156.24557,330 179.779734,330 L180.302262,330 L180.514503,330 C216.634706,330 248.639277,306.731161 259.736948,272.399916 C282.977121,267.644034 303.034394,253.107756 314.769677,232.515579 C322.127717,219.847664 326,205.462049 326,190.816695 C326,170.215527 318.340629,150.348291 304.512896,135.062265 L304.509436,135.057657 L304.509436,135.057657 Z M180.323025,308.425891 L180.237667,308.425891 C165.784425,308.421097 151.790034,303.356706 140.688156,294.113429 C141.347413,293.758901 141.9989,293.390144 142.642158,293.007419 L208.427666,255.053991 C211.769595,253.153852 213.833925,249.608963 213.8352,245.768115 L213.8352,153.071796 L241.641089,169.107791 C241.937517,169.255371 242.140513,169.541125 242.182073,169.869325 L242.182073,246.582645 C242.144008,280.689231 214.473077,308.356765 180.323025,308.425891 L180.323025,308.425891 Z M47.2928504,251.677204 C41.8589075,242.292801 38.996021,231.644224 38.9923784,220.803393 C38.9923784,217.267617 39.3015122,213.722625 39.9036309,210.238693 C40.3927082,210.531325 41.2462865,211.052071 41.8587865,211.40346 L107.644295,249.356887 C110.983517,251.303996 115.114052,251.303115 118.452441,249.354583 L198.770697,203.03465 L198.770697,235.107791 L198.770697,235.163091 C198.770697,235.476201 198.623371,235.771105 198.372745,235.959188 L131.869769,274.310088 C122.459941,279.719235 111.793782,282.567584 100.936785,282.570601 C78.8173592,282.567475 58.3751985,270.793573 47.2928504,251.673748 L47.2928504,251.677204 L47.2928504,251.677204 Z M29.9859741,108.234608 C37.2113195,95.6998181 48.6200123,86.102146 62.2154749,81.1212317 C62.2154749,81.6869098 62.1831774,82.6892314 62.1831774,83.3850961 L62.1831774,159.293103 L62.1820239,159.355316 C62.18262,163.192123 64.243768,166.733764 67.5814832,168.633128 L147.898585,214.946148 L120.093849,230.982143 C119.815256,231.165571 119.463239,231.197573 119.156067,231.067397 L52.6461704,192.684239 C33.5111816,181.612688 21.7295273,161.199087 21.7270276,139.111875 C21.7312091,128.276089 24.5800837,117.630812 29.9894346,108.238064 L29.9859741,108.234608 L29.9859741,108.234608 Z M258.439279,161.333461 L178.122177,115.01468 L205.928066,98.9844467 C206.206589,98.8008168 206.558709,98.7688051 206.865849,98.8991918 L273.374592,137.250092 C292.525947,148.304775 304.323532,168.719174 304.328339,190.812087 C304.328339,216.721525 288.141496,239.905109 263.80298,248.853422 L263.80298,170.67579 C263.80644,170.646988 263.80644,170.617034 263.80644,170.588231 C263.805397,166.766027 261.758273,163.236106 258.439279,161.333461 L258.439279,161.333461 Z M286.114824,119.730201 C285.468188,119.334512 284.816807,118.946612 284.160822,118.566586 L218.375313,80.6120062 C216.735072,79.6573902 214.870784,79.1541143 212.972394,79.1534554 C211.074004,79.1541143 209.209715,79.6573902 207.569474,80.6120062 L127.250065,126.931939 L127.250065,94.8587987 L127.250065,94.8034982 C127.250065,94.4901287 127.398865,94.1951926 127.649171,94.0074013 L194.152146,55.6887601 C203.558878,50.2722137 214.225965,47.4201826 225.083977,47.4201826 C259.277862,47.4201826 287.007621,75.1165186 287.007621,109.269188 C287.005966,112.773956 286.707301,116.272295 286.114824,119.726744 L286.114824,119.730201 L286.114824,119.730201 Z M112.133655,176.894793 L84.3219988,160.858799 C84.0255709,160.711218 83.8225744,160.425464 83.7810147,160.097265 L83.7810147,83.3827919 C83.79601,49.2485555 111.525769,21.5752614 145.704658,21.5752614 C160.180454,21.5782597 174.198355,26.6432247 185.325685,35.8911795 C184.825073,36.1642257 183.951886,36.645801 183.371683,36.9971896 L117.586175,74.9506171 C114.244711,76.8493776 112.180631,80.3932753 112.179795,84.2330372 L112.179795,84.2940981 L112.133655,176.894793 L112.133655,176.894793 Z M127.23853,144.367727 L163.010381,123.731422 L198.782232,144.353902 L198.782232,185.612687 L163.010381,206.236319 L127.23853,185.612687 L127.23853,144.367727 Z" />
          </g>
        </g>
      </svg>
    </n-icon>
    <n-icon v-else-if="iconStyle == 'browsing'" size="48">
      <svg viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g transform="translate(78.000000, 46.000000)" fill="#FFFFFF" fill-rule="nonzero">
            <path id="路径" d="M300.077185,12.30571 C297.624859,4.95634258 290.74672,0 283,0 C275.25328,0 268.375141,4.95634258 265.922815,12.30571 L253.629299,49.2172499 C251.837801,54.5982075 247.616125,58.8204866 242.235936,60.6122409 L205.303952,72.9075134 C197.955634,75.3601902 193,82.2393117 193,89.9871388 C193,97.734966 197.955634,104.614087 205.303952,107.066764 L242.235936,119.387759 C247.610351,121.174214 251.830958,125.385896 253.629299,130.757028 L265.922815,167.69429 C268.375141,175.043657 275.25328,180 283,180 C290.74672,180 297.624859,175.043657 300.077185,167.69429 L312.370701,130.757028 C314.162199,125.37607 318.383875,121.153791 323.764064,119.362037 L360.696048,107.066764 C368.044366,104.614087 373,97.734966 373,89.9871388 C373,82.2393117 368.044366,75.3601902 360.696048,72.9075134 L323.764064,60.6122409 C318.383875,58.8204866 314.162199,54.5982075 312.370701,49.2172499 L300.077185,12.2799877 L300.077185,12.30571 Z" />
            <path id="形状" d="M189.79315,52.427538 C177.465363,60.0261181 167.954617,71.5790614 167.954617,89.8001465 C167.954617,128.568413 211.03726,137.174968 232.565659,141.491168 C236.881677,163.020478 245.487868,206.104945 284.254493,206.104945 C309.271888,206.104945 321.728897,188.16816 328.577668,169.662775 C350.472043,240.924449 322.78688,318.091821 260.58503,359.17993 C198.383179,400.268039 116.544719,395.447687 59.5960392,347.341515 C2.6473599,299.235343 -15.7881367,219.351426 14.3198719,151.152734 C44.4278805,82.9540432 115.876883,42.7552337 189.79315,52.427538 L189.79315,52.427538 Z M213.621702,336.469701 C254.941714,320.360792 284.770769,283.740153 292.188729,240.014255 L242.438227,240.014255 C239.577349,273.815721 229.766958,306.662125 213.621702,336.495546 L213.621702,336.469701 Z M135.649096,240.0401 C138.972417,272.556269 150.05122,303.799816 167.954617,331.145526 C185.858015,303.799816 196.936818,272.556269 200.260138,240.0401 L135.649096,240.0401 L135.649096,240.0401 Z M43.6946615,240.0401 C51.104266,283.775743 80.9346687,320.407851 122.261689,336.521392 C106.128145,306.69413 96.3266421,273.856825 93.4710082,240.065946 L43.6946615,240.065946 L43.6946615,240.0401 Z M167.954617,106.909875 C150.047341,134.263178 138.968377,165.516042 135.649096,198.041145 L200.260138,198.041145 C196.940858,165.516042 185.861894,134.263178 167.954617,106.909875 L167.954617,106.909875 Z M43.6946615,198.041145 L93.4710082,198.041145 C96.3311519,164.239541 106.141587,131.392989 122.287533,101.559854 C80.9675205,117.668763 51.1384658,154.289402 43.7205059,198.0153 L43.6946615,198.041145 Z" />
          </g>
        </g>
      </svg>
    </n-icon>
    <n-icon v-else-if="iconStyle == 'plugins'" size="48">
      <svg
        width="512px"
        height="512px"
        viewBox="0 0 512 512"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <rect id="矩形" x="0" y="0" width="512" height="512" />
          <g id="编组" transform="translate(101.000000, 78.000000)" fill="#FFFFFF" fill-rule="nonzero">
            <path id="路径" d="M271.584847,10.8700438 C269.418625,4.37810261 263.342936,0 256.5,0 C249.657064,0 243.581375,4.37810261 241.415153,10.8700438 L230.555881,43.4752374 C228.973391,48.2284166 225.244244,51.9580965 220.491744,53.5408128 L187.868491,64.4016369 C181.377477,66.568168 177,72.6447253 177,79.4886393 C177,86.3325533 181.377477,92.4091106 187.868491,94.5756418 L220.491744,105.459187 C225.239143,107.037222 228.967347,110.757541 230.555881,115.502041 L241.415153,148.129956 C243.581375,154.621897 249.657064,159 256.5,159 C263.342936,159 269.418625,154.621897 271.584847,148.129956 L282.444119,115.502041 C284.026609,110.748862 287.755756,107.019182 292.508256,105.436466 L325.131509,94.5756418 C331.622523,92.4091106 336,86.3325533 336,79.4886393 C336,72.6447253 331.622523,66.568168 325.131509,64.4016369 L292.508256,53.5408128 C287.755756,51.9580965 284.026609,48.2284166 282.444119,43.4752374 L271.584847,10.8473225 L271.584847,10.8700438 Z" />
            <path id="路径" d="M272.277595,228.551126 C267.098902,222.986303 260.625537,218.102886 253.039206,218.102886 C247.957733,218.069474 243.081637,220.106226 239.533689,223.744158 C235.985741,227.38209 234.071729,232.30766 234.232375,237.386703 C235.140918,261.00881 237.139711,284.335641 240.206042,307.344482 C241.229657,315.009072 235.871709,322.061674 228.21328,323.13041 C208.407052,325.878751 188.50997,327.854831 168.567461,329.081364 C163.553934,329.363976 158.646964,327.559295 155.011227,324.095664 C151.37549,320.632034 149.335155,315.818276 149.374499,310.796944 C149.374499,303.415035 154.144347,297.123378 159.595603,292.171821 C164.93329,287.288404 168.113189,281.087601 168.113189,274.296245 C168.113189,258.782881 151.350579,246.199566 130.635808,246.199566 C109.943751,246.199566 93.1584272,258.782881 93.1584272,274.296245 C93.1584272,280.974034 96.2701856,287.083982 101.426165,291.899258 C106.990988,297.100664 111.897118,303.551317 111.897118,311.160361 C111.936968,316.249834 109.899854,321.135515 106.256215,324.689136 C102.612575,328.242756 97.6774722,330.157037 92.5905881,329.989906 C67.7755409,329.085735 43.0189533,326.978468 18.4080872,323.675535 C12.1136684,322.838484 7.16152234,317.886338 6.32447103,311.591919 C3.03100376,286.972409 0.923778077,262.208717 0.0101001588,237.386703 C-0.157213178,232.295844 1.76013751,227.357166 5.31873175,223.712822 C8.87732599,220.068479 13.7689598,218.034101 18.8623585,218.080173 C26.4259754,218.080173 32.9220548,222.986303 38.0780339,228.551126 C42.8933095,233.729819 49.0259719,236.818864 55.7037598,236.818864 C71.2171242,236.818864 83.8004388,220.056253 83.8004388,199.341482 C83.8004388,178.672138 71.2171242,161.8641 55.7037598,161.8641 C48.912404,161.8641 42.711601,165.089426 37.8508982,170.4044 C32.8766277,175.855656 26.5849704,180.625505 19.203062,180.625505 C14.1817303,180.664848 9.36797262,178.624513 5.9043418,174.988776 C2.44071099,171.353039 0.636030022,166.446069 0.91864273,161.432542 C2.1451752,141.331038 4.14396886,121.456668 6.86959657,101.786721 C7.93833171,94.1282928 14.9909342,88.7703443 22.6555237,89.7939592 C45.8687864,92.883004 69.2183305,94.8817977 92.6133017,95.7676267 C97.6980302,95.9410879 102.633333,94.0320105 106.277724,90.4819448 C109.922115,86.931879 111.959926,82.0483236 111.919831,76.9607951 C111.919831,69.3744645 106.990988,62.878385 101.426165,57.7224058 C96.2701856,52.9071301 93.1811408,46.7744676 93.1811408,40.0966796 C93.1811408,24.5833149 109.943751,12 130.658522,12 C151.327865,12 168.113189,24.5833149 168.113189,40.0966796 C168.113189,44.0261263 167.840627,47.5240152 167.454496,50.8401957 C159.186759,57.4271295 153.326659,66.739691 153.326659,80.1406942 C153.326659,114.211041 191.190171,121.774658 210.11057,125.567824 C213.903735,144.488223 221.467352,182.351735 255.537698,182.351735 C272.164027,182.351735 282.475985,173.33445 289.13106,161.909527 L289.903321,161.886814 C305.416685,161.886814 318,178.649424 318,199.364195 C318,220.056253 305.416685,236.841577 289.903321,236.841577 C283.225533,236.841577 277.092871,233.729819 272.277595,228.57384 L272.277595,228.551126 Z" />
          </g>
        </g>
      </svg>
    </n-icon>
  </n-avatar>
</template>

<script lang="ts" setup>
import { computed } from 'vue';

import { getChatModelColor, getChatModelIconStyle } from '@/utils/chat';

const props = defineProps<{
  model?: string;
  iconStyle?: 'default' | 'plugins' | 'browsing';
  color?: string;
  size?: any;
}>();

const size = computed(() => {
  if (props.size) {
    return props.size;
  }
  return 'large';
});

const iconStyle = computed(() => {
  if (props.model) {
    return getChatModelIconStyle(props.model);
  }
  return props.iconStyle || 'default';
});

const colorMap = {
  green: '#10A37F',
  black: '#000000',
  purple: 'rgb(171, 104, 255)',
  lightblue: '#9ECBFB',
  darkblue: '#2F94FF',
  darkgreen: '#0E7C7B',
  darkpurple: '#6F2C91',
};

const color = computed(() => {
  if (props.model) {
    const colorName = getChatModelColor(props.model);
    return colorMap[colorName as keyof typeof colorMap];
  } 
  if (!props.color) {
    return colorMap.green;
  }
  const key = props.color as keyof typeof colorMap;
  if (colorMap[key] != undefined) {
    return colorMap[key];
  }
  return props.color;
});
</script>
